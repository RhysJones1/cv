@Test
void testProcessModel() {
    // Given: Mock some ModelModel data from the DB
    MockCollectionData mockCollectionData = new MockCollectionData();
    List<ModelModel> mockModel = mockCollectionData.getMockModel();

    // Mock the behavior of extractModelRepo
    when(extractModelRepo.findAll()).thenReturn(mockModel);

    // Corrected: Mock the behavior of modelMapper
    when(modelMapper.mapModel(any(ModelModel.class)))
            .thenAnswer(invocation -> invocation.getArgument(0));

    // When: Calling the processModel method
    referenceDataService.processModel();

    // Then: Verify interactions
    verify(loadModelRepo).saveAll(anyList());
    verify(loadUpdateHistoryRepo).save(any(UpdateHistoryDocument.class));
    verify(activityLogger).logComplete(ReferenceDataType.MODEL.getValue());
}




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">   
    <link rel="stylesheet" href="css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Inputs</title>
</head>
<body>
    <h1>Different types of HTML inputs</h1>
    <input type ="text" id="" name=""><br>
    <input type = "button" value="Submit"><br>
    <input type ="file"><br>
    <input type ="date"><br>
    <input type="radio"><br>
    <input type = "range"><br> 
    <hr>
    <a href="index.html">Go Home</a> 
</body>
</html>

java.lang.ClassCastException: uk.gov.dvla.osl.etl.load.documents.ModelDocument cannot be cast to uk.gov.dvla.osl.etl.extract.models.ModelModel 
    @Test
    void testProcessModel() {
        // Given: Mock some ModelModel data from the DB
        MockCollectionData mockCollectionData = new MockCollectionData();
        List<ModelModel> mockModel = mockCollectionData.getMockModel();

        // Mock the behavior of extractModelRepo
        when(extractModelRepo.findAll()).thenReturn(mockModel);

        // Mock the behavior of modelMapper
        when(modelMapper.mapModel(any(ModelModel.class)))
                .thenAnswer(invocation -> {
                    ModelModel modelModel = invocation.getArgument(0);
                    return new ModelDocument(modelModel);
                });

        // When: Calling the processModel method
        referenceDataService.processModel();

        // Then: Verify interactions
        verify(loadModelRepo).saveAll(anyList());
        verify(loadUpdateHistoryRepo).save(any(UpdateHistoryDocument.class));
        verify(activityLogger).logComplete(ReferenceDataType.MODEL.getValue());
    }

 public void processModel() {
        loadModelRepo.saveAll(
                extractModelRepo.findAll().stream()
                        .map(modelMapper::mapModel)
                        .map(ModelDocument::new)
                        .collect(Collectors.toList())
        );
        loadUpdateHistoryRepo.save(new UpdateHistoryDocument(ReferenceDataType.MODEL));
        activityLogger.logComplete(ReferenceDataType.MODEL.getValue());
    }

package uk.gov.dvla.osl.etl.extract.models;

import javax.persistence.*;

import lombok.Data;


@Data
@Entity
@Table(name = "MODEL")
@IdClass(ModelModelId.class)
public class ModelModel {
    @Id
    private String code;

    @Id
    @Column(name = "FK_MAKECOD")
    private String makeCode;

    private String description;

    @Column(name = "FK_COUNTRYCOD")
    private String countryCode;
}


package uk.gov.dvla.osl.etl.load.documents;

import lombok.Data;
import org.springframework.data.mongodb.core.mapping.Document;
import org.springframework.data.mongodb.core.mapping.MongoId;
import uk.gov.dvla.osl.etl.extract.models.ModelModel;

import javax.persistence.Id;

@Data
@Document(collection = "model")
public class ModelDocument {
    @Id
    @MongoId
    private String id;
    private String description;
    private String makeCode;
    private String countryCode;

    public ModelDocument(ModelModel model) {
        this.id = String.format("%s-%s", model.getMakeCode(), model.getCode());
        this.description = model.getDescription();
        this.makeCode = model.getMakeCode();
        this.countryCode = model.getCountryCode();
    }
}

package uk.gov.dvla.osl.etl.extract.mappers;

import org.springframework.stereotype.Component;
import uk.gov.dvla.osl.etl.extract.models.ModelModel;

@Component
public class ModelMapper {
    public ModelModel mapModel(ModelModel model) {
        if (model.getCode() != null) {
            model.setCode(model.getCode().trim());
        }
        if (model.getDescription() != null) {
            model.setDescription(model.getDescription().trim());
        }
        if (model.getMakeCode() != null) {
            model.setMakeCode(model.getMakeCode().trim());
        }
        if (model.getCountryCode() != null) {
            model.setCountryCode(model.getCountryCode().trim());
        }
        return model;
    }
}

